Parrot Firmware Change Log
===========================
Project: Parrot – People’s ARduino Radiation mOniTor

Version 1.4.3  (2025-12-07)
---------------------------
- Updated firmware version to v1.4.3 and added user credentials for RADMON. 
- Adjusted HTTP request handling and added debug output for better traceability.

Version 1.4.2  (2025-12-07)
---------------------------
- Updated firmware version and added new constants for radiation safety. 
- Refactored code for clarity and improved functionality, including network readiness checks and status updates.
- Moved data transfer to radmon.org to it's own function
- Added DHT Sanity check

Version 1.4.1  (2025-12-07)
---------------------------
- Fix syntax errors in HTTP request for radmon
- Fix formatting in README.md
- Updated fork reference in README.md

Version 1.4.0  (2025-12-06)
---------------------------
- Removed the SSD1306 OLED debug display and all Adafruit_GFX/Adafruit_SSD1306 dependencies to reduce flash usage and keep the firmware within the ATmega32u4 (Leonardo) limits.
- Removed the front-panel button and service mode; the device now always runs in normal logging mode using LOG_PERIOD.
- Simplified the main loop by eliminating display and button branches; status is now conveyed solely via the RGB system LED and serial debug output.
- Kept full radmon.org upload, DHT11 interior temperature/humidity monitoring, watchdog, reset cause tracking, and Parrot HQ heartbeat telemetry.
- Updated firmware version to v1.4.0 and adjusted boot logging messages accordingly.

Version 1.3.1  (2025-12-05)
---------------------------
- Introduced Parrot HQ heartbeat support:
  - Added STATUS_PING_ENABLE, STATUS_HOST, STATUS_PORT, STATUS_PATH, DEVICE_ID, and API_SECRET compile-time configuration.
  - Implemented sendStatusPing() to call the Parrot HQ endpoint with device ID, firmware version, uptime, CPM, radiation state, HTTP status of the last radmon.org upload, interior temperature/humidity, zero-CPM streak, last fail reason, and reset cause flags.
  - Heartbeat is sent every logging cycle after the radmon.org upload, regardless of radmon success/failure.
- Converted the firmware identity to Parrot:
  - Added FW_NAME, FW_VERSION, and FW_BUILD using __DATE__ and __TIME__ for traceable builds.
  - Updated serial boot messages to include the firmware build string.

Version 1.3.0  (2025-12-04)
---------------------------
- Added DHT11 interior environment monitoring:
  - Reads temperature (°C) and humidity (%) once per logging period.
  - Stores the last valid readings and exposes them to the status LED logic and Parrot HQ heartbeat payload.
- Introduced high-temperature warning handling:
  - Configurable HIGH_TEMP_THRESHOLD_C (default 50°C).
  - When the enclosure temperature exceeds the threshold, the RGB LED moves to WARN (yellow) regardless of network state.
- Refined RGB LED status logic:
  - RED   = sensor error (no pulses for several consecutive logging periods).
  - YELLOW = network or high-temperature warning (non-fatal issues).
  - GREEN = healthy operation with successful radmon.org uploads and no active error flags.

Version 1.2.0  (2025-12-02)
---------------------------
- Switched from body-text "OK" detection to proper HTTP status code parsing for radmon.org:
  - Reads the HTTP/1.x status line and extracts the numeric code.
  - Treats 200 and 204 as success; all other codes are surfaced as failures.
  - Stores lastHttpStatusCode and a compact lastFailReason (FAIL_NONE, FAIL_CONNECT, FAIL_NO_OK, FAIL_DHCP).
- Improved robustness of the radmon.org upload path:
  - Added a per-request timeout to avoid hanging on stalls.
  - Ensured EthernetClient is always stopped after a request to prevent resource leaks.
  - Added explicit error handling for connection failures vs. non-2xx HTTP responses.

Version 1.1.1  (2025-12-01)
---------------------------
- General refactor and hardening of the original sketch:
  - Introduced LOG_PERIOD/MAX_PERIOD and multiplier-based CPM computation with safe bounds to prevent runaway CPM values.
  - Added CONV_FACTOR and usvh calculations to maintain µSv/h derivation from CPM.
  - Implemented zero-count tracking to detect long-term sensor failure (no pulses for multiple consecutive periods).
  - Normalised and clarified comments, naming, and structure to improve maintainability.
- Added system watchdog and reset-cause awareness:
  - Enabled the AVR hardware watchdog at 8s and reset it each main loop cycle.
  - Captured MCUSR at early init (POR/BOR/EXT/WDRF flags) and cleared it for the next reset.
- Introduced a three-colour RGB status LED:
  - Common-cathode wiring with named helper macros for OK, WARN, and ERROR states.
  - Mapped LED behaviour to network and sensor state to give a simple external health indicator.

Version 1.0.0  (Initial Parrot fork)
------------------------------------
- Forked from rjelbert/geiger_counter and renamed the project to Parrot – People’s ARduino Radiation mOniTor.
- Cleaned and documented the original CPM logging logic for use with an Arduino Leonardo + W5500 Ethernet (PoE) shield.
- Implemented radmon.org support using a simple HTTP GET with CPM and unit=CPM.
- Added basic serial diagnostics (CPM, µSv/h) and initial wiring documentation in the README.

Notes
-----
- This change log describes the Parrot firmware evolution after the fork from rjelbert/geiger_counter. The original upstream project remains MIT-licensed and is credited in NOTICE and README.md.
- Version dates are approximate and based on the refactor sequence; exact commit timestamps should be taken from the Git history.
